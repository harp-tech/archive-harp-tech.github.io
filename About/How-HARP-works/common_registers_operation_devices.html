
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Harp device common registers and operation &#8212; HARP Documentation 0.0.0 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'About/How-HARP-works/common_registers_operation_devices';</script>
    <script src="../../_static/_static/custom.js"></script>
    <link rel="shortcut icon" href="../../_static/harp.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using HARP" href="../Using-HARP/index.html" />
    <link rel="prev" title="Synchronization Clock" href="clock_sync.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fas fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../_static/harp.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/harp.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        About
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../Devices/device_list.html">
                        Device List
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../Using-HARP/index.html">
                        Using HARP
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        Harp Protocols
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fas fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        About
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../Devices/device_list.html">
                        Device List
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../Using-HARP/index.html">
                        Using HARP
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        Harp Protocols
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
      <div class="navbar-end-item">
        
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="harp-device-common-registers-and-operation">
<span id="refdeviceregistersandoperation"></span><h1>Harp device common registers and operation<a class="headerlink" href="#harp-device-common-registers-and-operation" title="Permalink to this heading">#</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id4">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#common-registers" id="id5">Common Registers:</a></p></li>
<li><p><a class="reference internal" href="#operation-modes" id="id6">Operation Modes:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#registers" id="id7">Registers</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id8">Common Registers</a></p>
<ul>
<li><p><a class="reference internal" href="#list-of-all-common-registers" id="id9">List of all Common Registers</a></p></li>
<li><p><a class="reference internal" href="#r-who-am-i-who-am-i" id="id10">R_WHO_AM_I – Who Am I</a></p></li>
<li><p><a class="reference internal" href="#r-timestamp-second-system-timestamp-seconds" id="id11">R_TIMESTAMP_SECOND – System timestamp: seconds</a></p></li>
<li><p><a class="reference internal" href="#r-timestamp-micro-system-timestamp-microseconds" id="id12">R_TIMESTAMP_MICRO – System timestamp: microseconds</a></p></li>
<li><p><a class="reference internal" href="#r-operation-ctrl-configuration-the-operation-mode" id="id13">R_OPERATION_CTRL – Configuration the operation mode</a></p></li>
<li><p><a class="reference internal" href="#r-reset-dev-reset-device-and-save-non-volatile-registers" id="id14">R_RESET_DEV – Reset device and save non-volatile registers</a></p></li>
<li><p><a class="reference internal" href="#r-device-name" id="id15">R_DEVICE_NAME</a></p></li>
<li><p><a class="reference internal" href="#r-serial-number-devices-serial-number" id="id16">R_SERIAL_NUMBER – Device’s serial number</a></p></li>
<li><p><a class="reference internal" href="#r-clock-config-synchronization-clock-configuration" id="id17">R_CLOCK_CONFIG – Synchronization clock configuration</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>This page lists the registers and operation modes that must be present in any Harp device. These allow Harp devices to be identified and easily combined. Additional optional registers and functionalities are also presented.</p>
<section id="common-registers">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Common Registers:</a><a class="headerlink" href="#common-registers" title="Permalink to this heading">#</a></h3>
<p>Summary description of each register can be found below.</p>
<p>Application Registers are the registers which differ from device to device according the device purpose. It is up to the developer to set the names and types of each Application Register. The addresses of Application Registers should be equal to 32 or higher.</p>
</section>
<section id="operation-modes">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Operation Modes:</a><a class="headerlink" href="#operation-modes" title="Permalink to this heading">#</a></h3>
<p>The Harp Device, when acting as a Peripheral, should implement the following Operation Modes:</p>
<ul class="simple">
<li><p><strong>Standby Mode</strong> (mandatory): Replies to Controller commands. Events are disabled and must not be sent.</p></li>
<li><p><strong>Active Mode</strong> (mandatory): Replies to Controller commands. Events are enabled and sent to Controller whenever the Peripheral decides.</p></li>
<li><p><strong>Speed Mode</strong> (optional): Allows the implementation of a different and specific communication protocol. In this mode, the Harp Binary Protocol is no longer used. The specific protocol designed must implement the possibility to leave this mode.</p></li>
</ul>
<p>The mandatory Operation Modes are the Standby Mode and Active Mode. The Speed Mode is optional and, in many of the applications, is not needed.</p>
<p>It is strongly recommended that a Harp Device acting as a Peripheral should continuously check if the communication with the Controller is active and healthy. If this doesn’t happen over the last 3 seconds, the Harp Device should go to Standby Mode and flush/destroy its TX buffer.</p>
</section>
</section>
<section id="registers">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Registers</a><a class="headerlink" href="#registers" title="Permalink to this heading">#</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Common Registers</a><a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<section id="list-of-all-common-registers">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">List of all Common Registers</a><a class="headerlink" href="#list-of-all-common-registers" title="Permalink to this heading">#</a></h4>
<body>
  <table border="1" cellpadding="2" cellspacing="0" style = "text-align: center;">
  <tbody>
    <tr style="font-weight: bold; font-size: 0.8rem; background-color: #aaa">
    <th>Name</th><th>Volatile</th><th>Read Only</th><th>Type</th><th>Add.</th><th>Default</th><th>Brief Description</th><th>Mandatory</th>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_WHO_AM_I</td><td>-</td><td>Yes</td><td>U16</td><td>000</td><td>a)</td><td>Who am I</td><td>Yes</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_HW_VERSION_H</td><td>-</td><td>Yes</td><td>U8</td><td>001</td><td>a)</td><td>Major Hardware version</td><td>Yes</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_HW_VERSION_L</td><td>-</td><td>Yes</td><td>U8</td><td>002</td><td>a)</td><td>Minor Hardware version</td><td>Yes</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_ASSEMBLY_VERSION</td><td>-</td><td>Yes</td><td>U8</td><td>003</td><td>a)</td><td>Version of the assembled components</td><td>Optional</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_HARP_VERSION_H</td><td>-</td><td>Yes</td><td>U8</td><td>004</td><td>a)</td><td>Major HARP version</td><td>Optional</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_HARP_VERSION_L</td><td>-</td><td>Yes</td><td>U8</td><td>005</td><td>a)</td><td>Minor HARP version</td><td>Optional</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_FW_VERSION_H</td><td>-</td><td>Yes</td><td>U8</td><td>006</td><td>a)</td><td>Major Firmware version of the application</td><td>Yes</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_FW_VERSION_L</td><td>-</td><td>Yes</td><td>U8</td><td>007</td><td>a)</td><td>Minor Firmware version of the application</td><td>Yes</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_TIMESTAMP_SECOND</td><td>Yes</td><td>No</td><td>U32</td><td>008</td><td>0</td><td>System timestamp: seconds</td><td>Yes</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_TIMESTAMP_MICRO</td><td>Yes</td><td>Yes</td><td>U16</td><td>009</td><td>0</td><td>System timestamp: microseconds</td><td>Optional</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_OPERATION_CTRL</td><td>No</td><td>No</td><td>U8</td><td>010</td><td>b)</td><td>Configuration of the operation mode</td><td>c)</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_RESET_DEV</td><td>No</td><td>No</td><td>U8</td><td>011</td><td>b)</td><td>Reset device and save non-volatile registers</td><td>Optional</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_DEVICE_NAME</td><td>No</td><td>No</td><td>U8</td><td>012</td><td>b)</td><td>Name of the device given by the user</td><td>Optional</td>
    </tr>
    <tr style="background-color: #ffffff">
    <td>R_SERIAL_NUMBER</td><td>No</td><td>No</td><td>U16</td><td>013</td><td>b)</td><td>Unique serial number of the device</td><td>Optional</td>
    </tr>
    <tr style="background-color: #f0f0f0">
    <td>R_CLOCK_CONFIG</td><td>No</td><td>No</td><td>U8</td><td>014</td><td>b)</td><td>Synchronization clock configuration</td><td>Optional</td>
    </tr>
  </tbody>
</table><ol class="loweralpha simple">
<li><p>These values are stored during factory process and are persistent, i.e., they cannot be changed by the user.</p></li>
<li><p>Check register notes on the specific register explanation</p></li>
<li><p>Only parts of the functionality is mandatory. Check register notes on the explanation.</p></li>
</ol>
</section>
<section id="r-who-am-i-who-am-i">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">R_WHO_AM_I – Who Am I</a><a class="headerlink" href="#r-who-am-i-who-am-i" title="Permalink to this heading">#</a></h4>
<body>
  <div class="table-container">
       <div class="table-item">Address: 000</div>
       <div class="table-item first">WHO_AM_I [15:0]</div>
  </div>
</body><p>Used to verify the identity of the device.</p>
<p>A list of devices can be found at <a class="reference external" href="https://github.com/harp-tech/protocol">https://github.com/harp-tech/protocol</a>. To reserve a range or certain IDs for your project or company, please send an e-mail to <a class="reference external" href="mailto:filipe&#37;&#52;&#48;oeps&#46;tech">filipe<span>&#64;</span>oeps<span>&#46;</span>tech</a>.
If the device doesn’t have a pre-allocated ID on the IDs list, this register should be read as 0.</p>
</section>
<section id="r-timestamp-second-system-timestamp-seconds">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">R_TIMESTAMP_SECOND – System timestamp: seconds</a><a class="headerlink" href="#r-timestamp-second-system-timestamp-seconds" title="Permalink to this heading">#</a></h4>
<body>
  <div class="table-container">
       <div class="table-item">Address: 008</div>
       <div class="table-item first">SECONDS [31:0]</div>
  </div>
</body><p>Contains the current system timestamp in seconds. The default value is 0 (ZERO) and will increment one unit for each second.</p>
</section>
<section id="r-timestamp-micro-system-timestamp-microseconds">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">R_TIMESTAMP_MICRO – System timestamp: microseconds</a><a class="headerlink" href="#r-timestamp-micro-system-timestamp-microseconds" title="Permalink to this heading">#</a></h4>
<body>
  <div class="table-container">
       <div class="table-item">Address: 009</div>
       <div class="table-item first">USECONDS [15:0]</div>
  </div>
</body><p>Contains the microseconds count within each second. Each LSB corresponds to 32 μseconds. The maximum
value is 31249.</p>
</section>
<section id="r-operation-ctrl-configuration-the-operation-mode">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">R_OPERATION_CTRL – Configuration the operation mode</a><a class="headerlink" href="#r-operation-ctrl-configuration-the-operation-mode" title="Permalink to this heading">#</a></h4>
<table cellpadding="1" cellspacing="0" width = "100%"  align = "center" style = "text-align: center; table-layout: fixed; font-size: 0.8rem">

  <caption></caption>
  <tbody>
    <tr style= "border: 0px">
      <th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    </tr>

    <tr style="border: 0px">
      <th>Address: 010</th><th class = "highlight">ALIVE_EN</th><th class = "highlight">OPLEDEN</th><th class = "highlight">VISUALEN</th>
      <th class = "highlight">MUTE_RPL</th><th class = "highlight">DUMP</th><th class = "highlight" >-</th><th colspan="2" class = "highlight">OP_MODE [1:0] </th>
    </tr>

    <tr style= "border: 0px">
      <th>Default (Mandatory)</th><th>1 (Optional)</th><th>1 (Optional)</th><th>1 (Optional)</th><th>0 (Optional)</th><th>0 (Optional)</th><th>0 -</th><th  colspan="2" >0 a)</th>
    </tr>

  </tbody>
</table><ol class="loweralpha simple">
<li><p>Standby Mode and Active Mode are mandatory. Speed Mode is optional.</p></li>
</ol>
<section id="how-each-bit-is-used">
<h5>How each Bit is used:<a class="headerlink" href="#how-each-bit-is-used" title="Permalink to this heading">#</a></h5>
<ul>
<li><p><strong>Bits 1:0 – OP_MODE [1:0]: Operation Mode</strong></p>
<blockquote>
<div><p>These bits define the operation mode of the device.
Note that, if Speed Mode is selected, the device will no longer reply to the HARP commands, only to its
specific Speed Mode commands.</p>
</div></blockquote>
</li>
<li><p><strong>Bit 3 – DUMP</strong></p>
<blockquote>
<div><p>When written to 1, the device adds the content of all registers to the streaming buffer.
This bit is always read as 0.</p>
</div></blockquote>
</li>
<li><p><strong>Bit 4 – MUTE_RPL</strong></p>
<blockquote>
<div><p>If equal to 1, the Replies to all the Commands are muted, i.e., will not be sent by the device.</p>
</div></blockquote>
</li>
<li><p><strong>Bit 5 – VISUALEN</strong></p>
<blockquote>
<div><p>If equal to 1, the visual indications, typically LEDs, available on the device will operate. If equals to 0, all the visual indications should turn off.</p>
</div></blockquote>
</li>
<li><p><strong>Bit 6 – OPLEDEN</strong></p>
<blockquote>
<div><p>If equal to 1, the LED present on the device will indicate the Operation Mode selected.</p>
</div></blockquote>
</li>
</ul>
<table border="1" cellpadding="2" cellspacing="0" width = 75% align = center style = "text-align: center;">
<caption>Table 2-2. Operation Mode</caption>
<tbody><tr style="font-weight: bold; background-color: #aaa">
  <th>OP_MODE[0:1]</th><th>Configuration</th>
  </tr>
  <tr style="background-color: #f0f0f0">
  <td>0</td><td>Standby Mode. The device has all Events turned off.</td>
  </tr>
  <tr style="background-color: #ffffff">
  <td>1</td><td>Active Mode. The device turns ON Event detection. Only enabled Events will be operating.</td>
  </tr>
  <tr style="background-color: #f0f0f0">
  <td>2</td><td>Reserved.</td>
  </tr>
  <tr style="background-color: #ffffff">
  <td>3</td><td>Speed Mode. The device enters Speed Mode.</td>
  </tr>
</table><table border="1" cellpadding="2" cellspacing="0" width = 75% align = center style = "text-align: center;">
<caption>Table 2-2. LED toggle indication</caption>
<tbody><tr style="font-weight: bold; background-color: #aaa">
  <th>Interval in Seconds</th><th>Operation Mode</th>
  </tr>
  <tr style="background-color: #f0f0f0">
  <td>4</td><td>Standby Mode.</td>
  </tr>
  <tr style="background-color: #ffffff">
  <td>2</td><td>Active Mode.</td>
  </tr>
  <tr style="background-color: #f0f0f0">
  <td>1</td><td>Speed Mode.</td>
  </tr>
  <tr style="background-color: #ffffff">
  <td>0.1</td><td>A critical error occurred. Only a hardware reset or a new power up can remove the device from this Mode.</td>
  </tr>
</table><ul>
<li><p><strong>Bit 7 – ALIVE_EN</strong></p>
<blockquote>
<div><p>If equal to 1, the device sends an Event with the R_TIMESTAMP_SECONDS content each second. This allows the
Controller and/or the user to check that the device is alive. Although this is an optional feature, it’s strongly suggested that the device should implement it.</p>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="r-reset-dev-reset-device-and-save-non-volatile-registers">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">R_RESET_DEV – Reset device and save non-volatile registers</a><a class="headerlink" href="#r-reset-dev-reset-device-and-save-non-volatile-registers" title="Permalink to this heading">#</a></h4>
<table cellpadding="1" cellspacing="0" width = "100%"  align = "center" style = "text-align: center; table-layout: fixed; font-size: 0.8rem">

<caption></caption>
<tbody>
<tr>
  <th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>

<tr>
  <th style= "background-color: white">Address: 011</th><th class = "highlight">BOOT_EE</th><th class = "highlight">BOOT_DEF</th><th class = "highlight">-</th><th class = "highlight">-</th>
  <th class = "highlight">-</th><th class = "highlight">SAVE</th><th class = "highlight">RST_EE</th><th class = "highlight">RST_DEF</th>
</tr>

</tbody>
</table><section id="id2">
<h5>How each Bit is used:<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h5>
<ul>
<li><p><strong>Bits 0 – RST_DEF</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device resets and boots with all the registers, both Common and Application
registers, with the default values. EEPROM will be erased and the default values will be the permanent boot
option.
This bit is always read as 0.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 1 – RST_EE</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device resets and boots with all his registers, both Common and Application
registers, with the values saved on the non-volatile memory, usually an EEPROM. The EEPROM values will be
the permanent boot option.</p>
<p>Should not be possible to write to this bit if the non-volatile memory is empty.</p>
<p>This bit is always read as 0.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 2 – SAVE</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device saves all the non-volatile registers (Common and Application) to the
internal non-volatile memory and boots. The non-volatile memory should be the permanent boot option.</p>
<p>This bit is always read as 0.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 3 – NAME_TO_DEFAULT</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device boots with the default name.</p>
<p>This bit is always read as 0.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 6 – BOOT_DEF</strong></p>
<blockquote>
<div><p>It is a state bit (read only). Indicates that the device booted with the default register values.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 7 – BOOT_EE</strong></p>
<blockquote>
<div><p>It is a state bit (read only). Indicates that the device booted with the register values saved on the EEPROM.</p>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid unexpected behaviors, one bit at a time should be written to register R_RESET_DEV.</p>
</div>
</section>
</section>
<section id="r-device-name">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">R_DEVICE_NAME</a><a class="headerlink" href="#r-device-name" title="Permalink to this heading">#</a></h4>
<p>An array of 25 bytes that should contain the device name.
The last byte and the bytes not used must be equal to 0.
This register is non-volatile. The device will reset if this register is written.</p>
</section>
<section id="r-serial-number-devices-serial-number">
<h4><a class="toc-backref" href="#id16" role="doc-backlink">R_SERIAL_NUMBER – Device’s serial number</a><a class="headerlink" href="#r-serial-number-devices-serial-number" title="Permalink to this heading">#</a></h4>
<body>
  <div class="table-container">
       <div class="table-item">Address: 013</div>
       <div class="table-item first">SERIAL_NUMBER [15:0]</div>
  </div>
</body><p>This number should be unique for each unit of the same Device ID.</p>
<p>To write to this register a two-step write command is needed. First, write the value 0xFFFF, and then the
desired serial number. The device will reset after the second write command is sent.</p>
</section>
<section id="r-clock-config-synchronization-clock-configuration">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">R_CLOCK_CONFIG – Synchronization clock configuration</a><a class="headerlink" href="#r-clock-config-synchronization-clock-configuration" title="Permalink to this heading">#</a></h4>
<table cellpadding="1" cellspacing="0" width = "100%"  align = "center" style = "text-align: center; table-layout: fixed; font-size: 0.8rem">

  <tbody>
    <tr>
      <th>Bit</th><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    </tr>

    <tr>
      <th>Address: 014</th><th class = "highlight">CLK_LOCK</th><th class = "highlight" style = "font-size: 0.8rem">CLK_UNLOCK</th><th class = "highlight">-</th><th class = "highlight">GEN_ABLE</th>
      <th class = "highlight">REP_ABLE</th><th class = "highlight">-</th><th class = "highlight">CLK_GEN</th><th class = "highlight">CLK_REP</th>
    </tr>

  </tbody>
</table><section id="id3">
<h5>How each Bit is used:<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h5>
<ul>
<li><p><strong>Bits 0 – CLK_REP</strong></p>
<blockquote>
<div><p>If this bit is written t to 1, the device will repeat the Harp Synchronization Clock to the Clock Output
connector, if available. It will act has a daisy-chain by repeating the Clock Input into Clock Output.
Writing 1 to this bit also unlocks the Harp Synchronization Clock.
This bit is read as 1 if the device is repeating the Harp Synchronization Clock.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 1 – CLK_GEN</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device resets will generate the Harp Synchronization Clock in the Clock Output
connector, if available. The Clock Input is ignored.
This bit is read as 1 if the device is generating the Harp Synchronization Clock.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 3 – REP_ABLE</strong></p>
<blockquote>
<div><p>This is a read only bit. Written to this bit will not have any effect.
The bit is equal to 1 if the device can repeat the Harp Timestamp Clock.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 4 – GEN_ABLE</strong></p>
<blockquote>
<div><p>This is a read only bit. Written to this bit will not have any effect.
The bit is equal to 1 if the device can generate the Harp Timestamp Clock.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 6 – CLK_UNCLOCK</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device will unlock the timestamp register counter (register
R_TIMESTAMP_SECOND) and will accept new timestamp values.
This bit is read as 1 if the timestamp register is unlocked.</p>
</div></blockquote>
</li>
<li><p><strong>Bits 7 – CLK_LOCK</strong></p>
<blockquote>
<div><p>If this bit is written to 1, the device will lock the current timestamp counter (register R_TIMESTAMP_SECOND)
and will not be able to accept new timestamp values.
This bit is read as 1 if the timestamp register is locked.</p>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The device always wakes up in the unlock state.</p>
</div>
</section>
</section>
</section>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="clock_sync.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Synchronization Clock</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../Using-HARP/index.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Using HARP</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#common-registers">
     Common Registers:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operation-modes">
     Operation Modes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#registers">
   Registers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Common Registers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#list-of-all-common-registers">
       List of all Common Registers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-who-am-i-who-am-i">
       R_WHO_AM_I – Who Am I
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-timestamp-second-system-timestamp-seconds">
       R_TIMESTAMP_SECOND – System timestamp: seconds
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-timestamp-micro-system-timestamp-microseconds">
       R_TIMESTAMP_MICRO – System timestamp: microseconds
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-operation-ctrl-configuration-the-operation-mode">
       R_OPERATION_CTRL – Configuration the operation mode
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#how-each-bit-is-used">
         How each Bit is used:
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-reset-dev-reset-device-and-save-non-volatile-registers">
       R_RESET_DEV – Reset device and save non-volatile registers
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id2">
         How each Bit is used:
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-device-name">
       R_DEVICE_NAME
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-serial-number-devices-serial-number">
       R_SERIAL_NUMBER – Device’s serial number
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-clock-config-synchronization-clock-configuration">
       R_CLOCK_CONFIG – Synchronization clock configuration
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id3">
         How each Bit is used:
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://github.com/ahleighton/harp-docs/edit/main/source/About/How-HARP-works/common_registers_operation_devices.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../../_sources/About/How-HARP-works/common_registers_operation_devices.rst.txt">
        <i class="fas fa-file-alt"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2010-2022, Open Ephys &amp; Contributors.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.2.2.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>